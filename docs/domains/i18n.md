# Domain: i18n

Status: Draft

Scope Provide platform-wide internationalization services: message resolution,
supported locale discovery, default locale policy. Excludes user-specific
preference persistence (handled by locale preference domain) and frontend
formatting concerns.

Functional Requirements (RFs)

- Expose default locale.
- Expose list of supported locales (may be empty meaning open set).
- Resolve message key to localized text with fallback to default and key-as-code
  when missing.

Data Model Aggregate I18n: { defaultLocale: string, supportedLocales: string[] }
Value objects: none (locales use canonical BCP47 tags).

Application Ports I18nQueryPort: defaultLocale(), supportedLocales(),
resolve(key, localeTag).

Use Cases GetSupportedLocalesUseCase: returns supported locale list.
ResolveMessageUseCase: resolves key for requested locale (optional) using
fallback.

API GET /v1/i18n/locales -> 200 { locales: string[] } GET
/v1/i18n/messages/{key}?locale=tag -> 200 string (text/plain) (additive; may be
hidden if not exposed externally yet). OpenAPI file:
docs/api/openapi/paths/i18n-locales.yaml

Permissions Locales endpoint: public (read-only). Message resolution endpoint:
internal (subject to future auth policy) â€“ no PII.

Acceptance Criteria

- Structure follows backend module blueprint.
- Headers present, files <80 lines.
- MessageSource loads all bundles and honors fallback.
- Tests cover aggregate, use cases, adapter, controller.
- OpenAPI path documented.

Non-Functional

- No hardcoded user-facing literals outside properties bundles.
- Fallback logic deterministic.
- Adaptable to future caching / ETag (not required now).

Dependencies

- AppConfigPort for default + supported locales.
- Spring MessageSource (via adapter only).

Risks

- Drift between supportedLocales config and bundle availability (mitigate with
  future health check).

Future Extensions

- Add endpoint for bundle checksum and ETag negotiation.
- Add locale negotiation strategy customization.
