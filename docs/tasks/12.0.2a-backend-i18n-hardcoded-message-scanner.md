<!--
File: 12.0.2a-backend-i18n-hardcoded-message-scanner.md
Purpose: Introduces automated detection of hardcoded user-facing English
strings that must be externalized into i18n bundles. Establishes CI gate
failing commits containing new violations prior to full i18n rollout.
All Rights Reserved. Arodi Emmanuel
-->

# Task 12.0.2a: Backend i18n â€“ Hardcoded Message Scanner & CI Gate

## Objective

Implement a repository script that scans backend Java + frontend TS/JS for
likely user-facing literals (English sentences/phrases) not already externalized
(no i18n key pattern match) and fail CI if violations exist. This runs before
adding bundles to list current debt.

## Scope

- New script `tools/ci/i18n-scan.mjs`.
- Heuristics: flag string literals containing spaces and alphabetic chars
  length >= 2 not matching regex for keys (`^[a-z0-9_.-]+$`) and not inside
  logger.debug/info with code property only.
- Ignore:
  - Tests (`/test/` paths) for now (keeps noise low).
  - Resource bundle files.
  - Config small tokens (<3 words).
- Allow inline suppression comment `// i18n-ignore` end-of-line.
- Add npm script `i18n:scan` and include in `ci` aggregate before build.

## Out of Scope

- Automatic extraction or rewriting.
- NLP language detection (simple heuristic only).

## Heuristic Details

- Parse lines; detect Java/TS string delimiters '"' (no template expression
  parsing needed initially).
- Tokenize; if token has space and A-Z or a-z and >15 chars length overall, and
  does not contain `{}` placeholders typical for logs, flag.
- Provide JSON + human summary output listing file, line, excerpt.

## Steps

1. Implement scanner module with reusable functions (keep <80 lines by splitting
   helpers if needed).
2. Add CLI wrapper printing violations and exiting non-zero if any.
3. Add suppression support.
4. Integrate into package.json scripts and CI pipeline prior to `lint`.
5. Run locally, capture initial violation list to update future tasks.
6. Document usage and suppression in standards doc (12.0.5).

## Acceptance Criteria

- Running `npm run i18n:scan` exits 0 if no violations, 1 with listing if any.
- CI (`npm run ci`) fails when violations present.
- Scanner performance acceptable (<2s typical repo size).
- Task doc updated with Actual Result after execution.

## Expected Result

Automated guard in place to prevent introduction of new hardcoded messages
before and after core i18n implementation.

## Actual Result

Pending.
