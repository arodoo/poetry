<!--
File: 12.0.4-backend-i18n-validation-and-api-contract-update.md
Purpose: Integrates validation constraint messages into i18n system and
updates API contract (OpenAPI + docs) to reflect enhanced error response
structure and new headers (Accept-Language). All Rights Reserved.
Arodi Emmanuel
-->

# Task 12.0.4: Backend i18n â€“ Validation & API Contract Update

## Objective

Localize validation messages and extend OpenAPI specification to document error
object with i18n metadata plus locale negotiation via Accept-Language.

## Scope

- Replace hardcoded validation annotation messages with `{validation.*}` keys.
- ValidationProblemHandler to emit fieldErrors array with `field` + `code`.
- Optional retention of legacy `errors` map for backward compatibility.
- OpenAPI components schema update: `Problem` includes `code` and `i18n`.
- Document Accept-Language header globally.

## Out of Scope

- Logging standardization (12.0.5).
- Email / notification localization (future roadmap).

## Validation Response (Target)

```
{
  "status":400,
  "title":"Validation failed",
  "code":"validation.failed",
  "i18n":{
    "titleKey":"validation.failed.title",
    "detailKey":"validation.failed.detail",
    "args":[]
  },
  "fieldErrors":[
    {"field":"email","code":"validation.email"},
    {"field":"password","code":"validation.password_policy"}
  ]
}
```

## Steps

1. Add keys for generic validation failed title/detail.
2. Update constraint annotations in DTOs.
3. Refactor ValidationProblemHandler to build ProblemDetail via builder.
4. Append fieldErrors list property (stable machine codes only).
5. Modify OpenAPI YAML (docs/api/openapi-v1.yaml) to extend Problem schema.
6. Update domain/API docs referencing new structure.
7. Mark legacy `errors` map as deprecated (if retained).

## Acceptance Criteria

- Validation errors expose fieldErrors with machine codes.
- OpenAPI schema updated and valid (CI should pass future validation).
- All validation annotations reference bundle keys.

## Expected Result

Consistent localized validation experience aligned with general problem model.

## Actual Result

Pending.
