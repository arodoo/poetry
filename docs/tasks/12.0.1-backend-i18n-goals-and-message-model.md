<!--
File: 12.0.1-backend-i18n-goals-and-message-model.md
Purpose: Defines initial backend i18n adoption scope (points 1-2 of plan):
Goals and Message Model. Establishes objectives, non-goals, machine code
strategy, key naming conventions, and parameterization rules to standardize
error and user-facing messaging before implementation. All Rights Reserved.
Arodi Emmanuel
-->

# Task 12.0.1: Backend i18n – Goals & Message Model

## Context

Auth endpoints exist (Task 12) and testing doc (12.1) drafted. We now need a
standard localization foundation to avoid fragile frontend string mapping. This
task covers Plan Points 1-2 only:

1. Goals
2. Message Model

Subsequent subtasks (12.0.2+) will implement bundles, infra, factories,
validation mapping, API spec updates, and logging alignment.

## Objectives

- Provide locale-aware human messages while preserving stable machine codes.
- Decouple presentation language from domain signaling (codes + params only).
- Keep v1 API non-breaking (additive structure only).
- Support client-driven locale via Accept-Language (X-Locale later).
- Prevent English leakage dependency in frontend logic.

## Message Model Definition

Canonical machine code pattern: `domain.segment.action_or_condition`. Examples:
`auth.invalid_credentials`, `auth.account_locked`, `rate_limit.exceeded`.

Derivative keys:

- `<code>.title` (short classification)
- `<code>.detail` (human explanation, parameterized)
- Optional `<code>.message` (single-line variants; unused initial phase)

Parameter placeholders use `{0}`, `{1}`, etc. Domain emits parameters only (no
formatting / concatenation). Example detail template:
`auth.account_locked.detail=Too many attempts. Try again in {0} seconds.`

Validation keys: `validation.not_blank`, `validation.email`, `validation.size`,
`validation.password_policy`, etc.

## Non-Goals (Explicit)

- User locale persistence in profile (future phase).
- Runtime hot-reload of custom tenant translations.
- Backporting localization to historical logs.

## Data Shape (Preview – not implemented yet)

Error response (ProblemDetail extension) will include stable `code` plus
resolved `title`/`detail` and an `i18n` object referencing keys & args. Example
(English requested):

```
{
  "status":401,
  "title":"Invalid credentials",
  "detail":"Username or password is incorrect.",
  "code":"auth.invalid_credentials",
  "i18n":{
    "titleKey":"auth.invalid_credentials.title",
    "detailKey":"auth.invalid_credentials.detail",
    "args":[]
  }
}
```

Frontend may ignore `title/detail` and map using keys for its own locale.

## Risks & Mitigations

| Risk         | Impact                | Mitigation                      |
| ------------ | --------------------- | ------------------------------- |
| Key sprawl   | Hard to manage        | Enforce naming pattern + review |
| Long files   | Hard to read          | Split bundles by concern early  |
| Missing keys | Runtime fallback only | useCodeAsDefaultMessage + tests |

## Acceptance Criteria

- Document approved message model and goals.
- Canonical naming & parameterization rules captured here.
- No code changes yet (pure documentation foundation).

## Expected Result

A clear, agreed upon message model enabling subsequent implementation tasks.

## Actual Result

Pending (will update after review / approval).

## Next Tasks

- 12.0.2a Hardcoded Message Scanner & CI Gate (new pre-task).
- 12.0.2 Bundles & Infrastructure (MessageSource, LocaleResolver).
- 12.0.3 Problem Factory & Error Codes.
- 12.0.4 Validation + API Contract update.
- 12.0.5 Logging + Documentation consolidation.
