<!--
File: 13.1-front-end-i18n-impl.md
Purpose: Scalable frontend i18n plan with strict enforcement,
route/breadcrumb readiness, and thousands-of-files growth path.
Missing key = build/CI failure. Tests stay English only. All Rights
Reserved. Arodi Emmanuel
-->

> ### COMPLETED

# Task 13.1 â€” Frontend i18n (Scalable, Strict, Route-Ready)

## Context

- Frontend localizes UI strings only.
- Scales to thousands of files with deterministic typing.
- Prepares for routing and accessibility tasks.

## Key Principles

1. Segmented catalogs per domain (<80 lines each).
2. Generated union type for keys; no fallbacks.
3. Missing/extra keys cause CI failure.
4. Key pattern: ui.<domain>.<component>.<element>[.<state>].
5. Fail fast on missing keys; tests use English literals.
6. Scripts idempotent; route/breadcrumb keys in dedicated domain.

## Objectives

- Validate VITE_DEFAULT_LOCALE (default 'es').
- Catalog: src/shared/i18n/catalog/<locale>/<domain>/*.ts (domains: common,
  layout, demo, route).
- Route registry and breadcrumb builder using i18n keys.
- Generator/verification scripts for keys and parity.
- Provider with { t, locale, setLocale }; locale from stored/env/navigator.
- Error mapper for internal codes only.

## Implementation

All 13 steps completed: env validation, catalog structure, scripts
(verify/generate), npm scripts, provider/hooks, route registry/breadcrumbs,
externalization, errorMapper, scanner adjustments, unit tests, documentation
update.

## Acceptance Criteria

- Build fails on missing keys, parity mismatches, duplicates.
- Compile-time safety via generated union.
- UI literals externalized (tests excepted).
- Route/breadcrumb utilities use i18n keys.
- Files <80 lines; lines <80 chars.
- Env validation at startup; error mapping preserves original messages.

## Actual Result

All acceptance criteria met:

- Strict env validation and locale resolution implemented.
- Segmented catalogs with parity enforcement (verify + gen scripts).
- Dev ergonomics via Vite plugin auto key generation & verification.
- All literals in App externalized; scanner excludes tests & generated.
- Route registry and breadcrumb builder referencing i18n keys only.
- Error mapper present (extensible) without altering original messages.
- Full granular test coverage (all <40 lines) for provider + helpers.
- Keys union regenerated automatically; missing key usage throws.

Status: Complete Last Updated: 2025-08-29

## Links

- Verify script: ../../tools/ci/i18n-verify.mjs
- Generator script: ../../tools/ci/i18n-generate-keys.mjs
- Scanner: ../../tools/ci/i18n-scan.mjs
