<!--
File: 12.0.2-backend-i18n-bundles-and-infrastructure.md
Purpose: Implements i18n resource bundle structure and Spring infrastructure.
Defines MessageSource, locale resolution strategy, supported locales config,
resource file segmentation rules, and fallback behavior. Prepares foundation
for error factory and validation integration. All Rights Reserved.
Arodi Emmanuel
-->

# Task 12.0.2: Backend i18n â€“ Bundles & Infrastructure

## Objective

Set up message bundle files and Spring beans (MessageSource + LocaleResolver)
with additive, low risk configuration enabling later ProblemDetail factory.

## Scope

- Resource bundle hierarchy under `src/main/resources/i18n/`.
- English baseline + partial Spanish sample.
- AppProperties additions: default + supported locales.
- MessageSource bean with multiple basenames (segmentation ready).
- Locale resolution via Accept-Language (future X-Locale header hook).
- Fallback to default locale and finally to code when key missing.

## Out of Scope

- ProblemDetail construction (12.0.3).
- Validation annotation rewrites (12.0.4).
- Logging changes (12.0.5).

## Bundle Segmentation Strategy

Split early to respect line limits (<80 lines per file):

- messages_en_core.properties (generic + platform)
- messages_en_auth.properties (auth + rate limit)
- messages*en_validation.properties (validation keys) Mirror for
  `messages_es*\*.properties` (partial translation allowed).

## Initial Key Set (English)

- auth.invalid_credentials.title/detail
- auth.invalid_refresh_token.title/detail
- auth.duplicate_user.title/detail
- auth.account_locked.title/detail
- rate_limit.exceeded.title/detail
- validation.not_blank, validation.email, validation.password_policy
- platform.unexpected.title/detail, platform.invalid_argument.title/detail

## Spring Configuration Plan

1. Add `I18nConfig` class (package: config.i18n) exposing:
   - MessageSource (ReloadableResourceBundleMessageSource) basenames list.
   - AcceptHeaderLocaleResolver (default locale from AppProperties).
2. Extend `AppProperties` with locales fields + validation.
3. Wire LocalValidatorFactoryBean with message source (prep for 12.0.4).
4. Provide utility `LocaleSupport` (resolve or fallback) if needed.

## Data / Contract (No Breaking Changes)

No API surface change yet; internal infrastructure only.

## Steps

1. Create bundles with English + minimal Spanish.
2. Create AppProperties additions + docs comment.
3. Implement I18nConfig.
4. Update README / standards doc pointer (later consolidated 12.0.5).
5. Manual smoke (start app, fetch bean logs no errors).

## Acceptance Criteria

- Application starts with configured MessageSource and default locale.
- Missing key returns code (useCodeAsDefaultMessage = true).
- Bundles segmented and within line limits.
- Documentation of bundle naming present here.

## Expected Result

Infrastructure operational and ready for Problem factory integration.

## Actual Result

Pending.
